package org.exoplatform.selenium.platform.portal.func.account;

import org.exoplatform.selenium.platform.portal.func.account.AccountHelpers;
import org.openqa.selenium.firefox.FirefoxDriver;
import org.openqa.selenium.interactions.Actions;
import org.testng.Assert;
import org.testng.annotations.AfterTest;
import org.testng.annotations.BeforeTest;
import org.testng.annotations.Test;

public class Test_PLT_ACC_01_002_003_004_005_006_007_008_009 extends AccountHelpers{
	@BeforeTest
    public void setUpBeforeTest(){
    	driver = new FirefoxDriver();
    	actions = new Actions(driver);
    	baseUrl = "http://localhost:8080";
    	driver.get(baseUrl + "/portal/intranet/");
    	pause(3000);
    }
	
    @AfterTest
    public void afterTest(){
    	driver.quit();
        String verificationErrorString = verificationErrors.toString();
        if (!"".equals(verificationErrorString)) {
          Assert.fail(verificationErrorString);
        }
    }
    
    @Test
    public void testPLT_ACC_01_002_003_004_005_006_007_008_009(){
    	signInAsRoot();
		pause(3000);
		System.out.println("-- Create new account with user name start with number --");
		addNewAccountAtNewStaff("01_001", "test_prl_0123", "test_prl_0123", "testprl", 
				"testprlExo", "test_prl_1234@localhost.com", "", "English", true);
		waitForMessage("The field \"User Name:\" must start with a character.");
		closeMessageDialog();
		
		System.out.println("-- Create new account with blank required fields --");
		addNewAccountAtNewStaff("Test_PRL_01_004", "Test_PRL_01_004", 
				"Test_PRL_01_004", "", "", "", "", "English", false);	
		waitForMessage("The field \"First Name\" is required.");
		waitForMessage("The field \"Last Name\" is required.");
		waitForMessage("The field \"Email Address\" is required.");
		closeMessageDialog();
		
		System.out.println("-- Create new account with user name includes special characters  --");
		addNewAccountAtNewStaff("@%$%^&!", "Test_POR_01_005", "Test_POR_01_005", "Test_POR_01_005", 
				"Test_POR_01_005", "Test_POR_01_005@localhost.com", "", "English", false);
		
		waitForMessage("Only lowercase letters, digits, dot and underscore characters are allowed for the field \"User Name\".");
		waitForMessage("The field \"User Name\" must end with a lowercase letter or digit instead of \"!\".");
		closeMessageDialog();
		
		System.out.println("-- Create new account  with user name contains dot in the middle  --");
		addNewAccountAtNewStaff("test_prl_01.006", "Test_PRL_01_006", "Test_PRL_01_006", "Test_PRL_01_006", 
				"Test_PRL_01_006", "Test_PRL_01_006@localhost.com", "", "English", true);
		signOut();
		
		signIn("test_prl_01.006", "Test_PRL_01_006");
		
		signOut();
		
		signInAsRoot();
		
		goToUsersAndGroupsManagement();
		
		deleteUser("test_prl_01.006");
		
		
		System.out.println("-- Create new account with user name starts with digit, underscore, dot, dash--");
		
		addNewAccountAtNewStaff("_test_prl_01_007", "Test_PRL_01_007", "Test_PRL_01_007", "Test_PRL_01_007", "Test_PRL_01_007", "Test_PRL_01_007@localhost.com", "", "English", false);		
		waitForMessage("The field \"User Name:\" must start with a character.");
		//The field "User Name:" must start with a character.
		closeMessageDialog();
		
		addNewAccountAtNewStaff(".test_prl_01_007", "Test_PRL_01_007", "Test_PRL_01_007", "Test_PRL_01_007", "Test_PRL_01_007", "Test_PRL_01_007@localhost.com", "", "English", false);		
		waitForMessage("The field \"User Name:\" must start with a character.");
		closeMessageDialog();
		
		addNewAccountAtNewStaff("01_007_test", "Test_PRL_01_007", "Test_PRL_01_007", "Test_PRL_01_007", "Test_PRL_01_007", "Test_PRL_01_007@localhost.com", "", "English", false);		
		waitForMessage("The field \"User Name:\" must start with a character.");
		closeMessageDialog();
		
		System.out.println("--Create new account with user name less than 3 chars --");
		addNewAccountAtNewStaff("te", "Test_PRL_01_009", "Test_PRL_01_009", "Test_PRL_01_009", "Test_PRL_01_009", "Test_PRL_01_009@localhost.com", "", "English", false);
		//The length of the text in field "User Name:" must be between "3" and "30" characters.
		waitForMessage("The length of the text in field \"User Name:\" must be between \"3\" and \"30\" characters.");
		closeMessageDialog();
		
		System.out.println("--Create new account with user name over 30 chars --");
		addNewAccountAtNewStaff("test_prl_01_009test_prl_01_009test_prl_01_009test_prl_01_009", "Test_PRL_01_009", "Test_PRL_01_009", "Test_PRL_01_009", "Test_PRL_01_009", "Test_PRL_01_009@localhost.com", "", "English", false);		
		waitForMessage("The length of the text in field \"User Name\" must be between \"3\" and \"30\" characters.");
		closeMessageDialog();
		
		System.out.println("-- Create new account with user name the same with existing but different by lower/upper case --");
		addNewAccountAtNewStaff("test_prl_01_001", "test_prl_01_001", "test_prl_01_001", "test_prl_01_001", "test_prl_01_001", "test_prl_01_001@localhost.com", "", "English", true);
		goToUsersAndGroupsManagement();		
		deleteUser("test_prl_01_001");
		
		addNewAccountAtNewStaff("TEST_PRL_01_001_TEST", "test_prl_01_001", "test_prl_01_001", "test_prl_01_001", "test_prl_01_001", "test_prl_01_001@localhost.com", "", "Czech", false);
		waitForMessage("Only lowercase letters, digits, dot and underscore characters are allowed for the field \"User Name\".");
        waitForMessage("The field \"User Name\" must end with a lowercase letter or digit instead of \"T\".");
        waitForMessage("The \"User Name\" field must start with a lowercase letter.");
		
        closeMessageDialog();
        signOut();
        
    }
    
}
