package org.exoplatform.selenium.platform.portal.func.account;

import org.exoplatform.selenium.platform.portal.func.account.AccountHelpers;
import org.openqa.selenium.Keys;
//import org.openqa.selenium.StaleElementReferenceException;
//import org.openqa.selenium.WebElement;
//import org.openqa.selenium.chrome.ChromeDriver;
import org.openqa.selenium.firefox.FirefoxDriver;
import org.openqa.selenium.interactions.Actions;
import org.testng.Assert;
import org.testng.annotations.AfterGroups;
import org.testng.annotations.BeforeGroups;
import org.testng.annotations.Test;

public class Demo extends AccountHelpers{
	String nametest="test_prl_exo2013";
	
	@BeforeGroups(groups = {"platform"})
	public void beforeTest() throws Exception {
		driver = new FirefoxDriver();
    	actions = new Actions(driver);
    	baseUrl = "http://localhost:8080";
    	driver.get(baseUrl + "/portal/intranet/");
    	pause(3000);
    	
		/*String browser = System.getProperty("browser");
		if(browser.equals("chrome")){
			driver = new ChromeDriver();
		} else {
			driver = new FirefoxDriver();
		}
		baseUrl = System.getProperty("baseUrl");
		pause(3000);*/
		
	}

	@AfterGroups(groups = {"platform"})
	public void afterTest() throws Exception {
		driver.quit();
		String verificationErrorString = verificationErrors.toString();
		if (!"".equals(verificationErrorString)) {
			Assert.fail(verificationErrorString);
		}
	}
	
	@Test(groups = {"platform", "demo"})
	public void demoLogin() throws Exception{
		//driver.get(baseUrl + "");
		//pause(3000);
		signInAsRoot();
		pause(3000);
		
		goToNewStaff();
		pause(3000);
				
		addNewUserAccount(nametest, "test_prl_0123", "test_prl_0123", "testprl", 
				"testprlExo", "test_prl_123456@localhost.com", "", "English", true);
		pause(3000);
		
		goToUsersAndGroupsManagement();
		pause(3000);
		
		deleteUser(nametest);
		pause(3000);
		signOut();

	}
	@Test
	public void pausetest(long timeinMillis ){
		try {
			Thread.sleep(timeinMillis);
		} catch (InterruptedException e) {
			e.printStackTrace();
		}
				
	}
	@Test
	public void deleteCache(){
		Actions doClearCache = new Actions(driver);
		doClearCache.sendKeys(Keys.CONTROL).sendKeys(Keys.F5).build().perform();		
	}
	
	
}
