package org.exoplatform.selenium.platform.portal.func.account;


import org.openqa.selenium.By;
import org.openqa.selenium.firefox.FirefoxDriver;
//import org.openqa.selenium.firefox.FirefoxProfile;
import org.openqa.selenium.interactions.Actions;
import org.testng.Assert;
import org.testng.annotations.AfterGroups;
import org.testng.annotations.BeforeGroups;
import org.testng.annotations.Test;

import org.exoplatform.selenium.platform.portal.func.account.AccountHelpers;

public class Test_PLT_ACC_011_012_013_014 extends AccountHelpers{
	@BeforeGroups(groups = {"platform"})
	public void beforeTest() throws Exception {
		/*FirefoxProfile firefoxProfile = new FirefoxProfile();
		firefoxProfile.setEnableNativeEvents(false);
		driver = new FirefoxDriver(firefoxProfile);*/
		driver = new FirefoxDriver();
    	actions = new Actions(driver);
    	baseUrl = "http://localhost:8080";
    	driver.get(baseUrl + "/portal/intranet/");
    	pause(3000);
	}

	@AfterGroups(groups = {"platform"})
	public void afterTest() throws Exception {
		driver.quit();
		String verificationErrorString = verificationErrors.toString();
		if (!"".equals(verificationErrorString)) {
			Assert.fail(verificationErrorString);
		}
	}
	
	@Test(groups = {"platform", "account"})
	public void testPLT_ACC_011_012_013_014(){
		
		signIn("john","gtn");
		pause(3000);
		goToNewStaff();
		pause(3000);
		
		addNewUserAccount("test_prlexo011", "test_prl", "test_prl_0123", "testprl", 
				"testprlExo", "test_prl12345@localhost.com", "", "English", false);
		waitForMessage("Password and Confirm Password must be the same.");
		closeMessageDialog();
		pause(3000);
		
		log("-- Create new account when copy from Password and paste to Confirm Password field --");
		
		driver.findElement(By.linkText("Reset")).click();
		pause(3000);
		
		type(ELEMENT_INPUT_USERNAME, "test_exo012bis", true);
		//type(ELEMENT_INPUT_PASSWORD, "test_prl", true);
		rightClickAndCopyPaste(ELEMENT_INPUT_PASSWORD, "test_prl",ELEMENT_INPUT_CONFIRM_PASSWORD);
		pause(3000);
		type(ELEMENT_INPUT_FIRSTNAME, "first", true);
		type(ELEMENT_INPUT_LASTNAME, "lastName", true);
		type(ELEMENT_INPUT_EMAIL, "exo31@localhost.com", true);
		save();
		waitForMessage("Password and Confirm Password must be the same.");
		pause(1000);
		closeMessageDialog();
		
		log("-- Create new account with Password/Confirm Password less than 6 characters  --");
		
		type(ELEMENT_INPUT_USERNAME, "test_exo41", true);
		type(ELEMENT_INPUT_PASSWORD, "GTN P", true);
		type(ELEMENT_INPUT_CONFIRM_PASSWORD, "GTN P", true);
		type(ELEMENT_INPUT_FIRSTNAME, "first", true);
		type(ELEMENT_INPUT_LASTNAME, "lastName", true);
		type(ELEMENT_INPUT_EMAIL, "exo32@localhost.com", true);
		save();
		waitForMessage("The length of the text in field \"Password:\" must be between \"6\" and \"30\" characters.");
		waitForMessage("The length of the text in field \"Confirm Password:\" must be between \"6\" and \"30\" characters.");
		pause(1000);
		closeMessageDialog();
		
		log ("-- Create new account with Password/Confirm Password over 30 characters --");
		String password_name="GTN PLT ACC GTN PLT ACC GTN PLT ACC GTN PLT ACC";
		type(ELEMENT_INPUT_USERNAME, "test_exo42", true);
		type(ELEMENT_INPUT_PASSWORD, password_name, true);
		type(ELEMENT_INPUT_CONFIRM_PASSWORD, password_name, true);
		type(ELEMENT_INPUT_FIRSTNAME, "first", true);
		type(ELEMENT_INPUT_LASTNAME, "lastName", true);
		type(ELEMENT_INPUT_EMAIL, "exo33@localhost.com", true);
		save();
		waitForMessage("The length of the text in field \"Password:\" must be between \"6\" and \"30\" characters.");
		waitForMessage("The length of the text in field \"Confirm Password:\" must be between \"6\" and \"30\" characters.");
		pause(1000);
		closeMessageDialog();
		pause(3000);
		
		signOut();
		
	}
}
